(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{HARG:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("cpVT"),a=r("z7pX"),o=r("u6S6"),i=r.n(o);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={generateId:function(e){return i()(e)},reorderWidget:function(e,t,r,o){var i=e[t]||[],c=i&&i[r];if(!c)throw new Error("Unable to reorder the widget at index ".concat(r,". the list of widgets contains only ").concat(i.length," elements."));var u=i.reduce((function(e,t,n){var i=[t,c];switch(n){case r:return e;case o:return[].concat(Object(a.a)(e),Object(a.a)(o>r?i:i.reverse()));default:return[].concat(Object(a.a)(e),[t])}}),[]);return s(s({},e),{},Object(n.a)({},t,u))},replaceWidget:function(e,t,r,a,o){var i=e[t]||[];return s(s({},e),{},Object(n.a)({},t,i.reduce((function(e,t){var n=t.key,i=t.value;return n===r?e.concat([{key:a,value:o}]):e.concat([{key:n,value:i}])}),[])))},addWidget:function(e,t,r,a){var o;return s(s({},e),{},Object(n.a)({},t,null===(o=e[t])||void 0===o?void 0:o.concat([{key:r,value:a}])))},deleteWidget:function(e,t,r){var a;return s(s({},e),{},Object(n.a)({},t,null===(a=e[t])||void 0===a?void 0:a.filter((function(e){var t=e.key;return r!==t}))))},copyValue:function(e,t,r){return s(s({},e),{},{id:t,name:r})}}},SGvv:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("q1tI"),a=r.n(n),o=r("x36Y"),i=r("Q0Im"),c=r("nKUr"),s=a.a.createContext(null);t.b=function(e){var t=e.children,r=e.libraries,n=e.remoteSlices,a=e.env,u=r&&r.map((function(e){return{name:e.name,isLocal:e.isLocal,components:e.components.map((function(t){return Object(o.c)({slice:t,mockConfig:i.b.getSliceMockConfig(a.mockConfig,e.name,t.model.name),remoteSlice:null===n||void 0===n?void 0:n.find((function(e){return e.id===t.model.id}))})}))}}));return Object(c.jsx)(s.Provider,{value:u,children:t})}},biDh:function(e,t,r){"use strict";var n=r("cpVT");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i={variation:function(e,t){if(e.variations.length)return t?e.variations.find((function(e){return e.id===t})):e.variations[0]},updateVariation:function(e,t){return function(r){var n=e.variations.map((function(e){return e.id===t?r(e):e}));return o(o({},e),{},{variations:n})}}};t.a=i},tsos:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("cpVT"),r("xvhg"),r("BO2T");var n;!function(e){e.Modified="MODIFIED",e.Synced="SYNCED",e.Invalid="INVALID",e.NewSlice="NEW_SLICE"}(n||(n={}))},x36Y:function(e,t,r){"use strict";r.d(t,"a",(function(){return F})),r.d(t,"c",(function(){return q})),r.d(t,"b",(function(){return J}));var n,a=r("xvhg"),o=r("cpVT"),i=r("dhJC"),c=r("q1tI"),s=r.n(c),u=r("20a2"),d=r("SGvv"),p=r("H+61");!function(e){e.GenerateScreenShot="generate-screenshot",e.GenerateCustomScreenShot="generate-custom-screenshot",e.AddWidget="variation-add-widget",e.ReorderWidget="variation-reorder-widget",e.ReplaceWidget="variation-replace-widget",e.RemoveWidget="variation-remove-widget",e.UpdateWidgetMockConfig="update-widget-mock-config",e.DeleteWidgetMockConfig="delete-widget-mock-config"}(n||(n={}));var l=r("Q0Im");function f(e){return function(t){return function(r,a,o,i,c){var s=l.b.updateFieldMockConfig(r,t,a,o,i,c);e({type:n.UpdateWidgetMockConfig,payload:s})}}}function v(e){return function(t){return function(r,a,o){if(r){var i=l.b.deleteFieldMockConfig(r,t,a,o);e({type:n.DeleteWidgetMockConfig,payload:i})}}}}var g=r("rg98"),y=r("vJKn"),O=r.n(y);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m,j=function(e){var t=e.url,r=e.params,n=void 0===r?{method:"GET"}:r,a=e.setData,o=e.data,i=void 0===o?{}:o,c=e.successMessage,s=e.errorMessage,u=e.onSuccess;return a(h({loading:!0,done:!1,error:null,status:null},i.onLoad?i.onLoad:{})),fetch(t,h({headers:{Accept:"application/json","Content-Type":"application/json"}},n)).then(function(){var e=Object(g.a)(O.a.mark((function e(t){var r,n,o,d,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,n=r.err,o=r.reason,d=r.warning,p=r.status,!(t.status>209)){e.next=6;break}return e.abrupt("return",a(h({loading:!1,done:!0,error:n,status:p,message:s||o},i.onResponse?i.onResponse:{})));case 6:a(h({loading:!1,done:!0,error:null,warning:!!d,status:p,message:d||c||o},i.onResponse?i.onResponse:{})),u(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function w(e){return function(t){return function(){var t=Object(g.a)(O.a.mark((function t(r,a,o){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j({url:"/api/screenshot?sliceName=".concat(a,"&libraryName=").concat(r),setData:o,data:{onLoad:{imageLoading:!0},onResponse:{imageLoading:!1}},successMessage:"Screenshots were saved to FileSystem",onSuccess:function(t){var r=t.screenshots;e({type:n.GenerateScreenShot,payload:{screenshots:r}})}});case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()}}function S(e){return function(t){return function(){var r=Object(g.a)(O.a.mark((function r(a,o,i,c){var s;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(s=new FormData).append("file",c),s.append("libraryName",a),s.append("sliceName",o),s.append("variationId",t),j({url:"/api/custom-screenshot",setData:i,params:{method:"POST",body:s,headers:{}},data:{onLoad:{imageLoading:!0},onResponse:{imageLoading:!1}},successMessage:"New screenshot added!",onSuccess:function(r){e({type:n.GenerateCustomScreenShot,payload:{variationId:t,screenshot:r}})}});case 6:case"end":return r.stop()}}),r)})));return function(e,t,n,a){return r.apply(this,arguments)}}()}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.Reset="reset",e.Save="save",e.Push="push",e.UpdateMockConfig="update-mock-config",e.CopyVariation="copy-variation"}(m||(m={}));var W=function e(t){var r=this;Object(p.a)(this,e),this.dispatch=t,Object(o.a)(this,"reset",(function(){r.dispatch({type:m.Reset})})),Object(o.a)(this,"save",function(e){return function(){var t=Object(g.a)(O.a.mark((function t(r){var n,a=arguments;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:function(){},j({url:"/api/slices/save",params:{method:"POST",body:JSON.stringify({sliceName:r.model.name,from:r.from,model:k(k({},r.model),{},{variations:r.variations}),mockConfig:r.mockConfig})},setData:n,successMessage:"Models & mocks have been generated successfully!",onSuccess:function(t){var n=t.screenshots,a=k(k({},r),{},{screenshotUrls:n,initialMockConfig:r.mockConfig,initialVariations:r.variations});e({type:m.Save,payload:{state:a}})}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(this.dispatch)),Object(o.a)(this,"push",function(e){return function(){var t=Object(g.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j({url:"/api/slices/push?sliceName=".concat(r.model.name,"&from=").concat(r.from),setData:n,successMessage:"Model was correctly saved to Prismic!",onSuccess:function(){e({type:m.Push})}});case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(this.dispatch)),Object(o.a)(this,"copyVariation",(function(e,t,n){return r.dispatch({type:m.CopyVariation,payload:{key:e,name:t,copied:n}})})),Object(o.a)(this,"variation",(function(e){return{generateScreenShot:w(r.dispatch)(e),generateCustomScreenShot:S(r.dispatch)(e),addWidget:function(t,a,o){r.dispatch({type:n.AddWidget,payload:{variationId:e,widgetsArea:t,key:a,value:o}})},replaceWidget:function(t,a,o,i){r.dispatch({type:n.ReplaceWidget,payload:{variationId:e,widgetsArea:t,previousKey:a,newKey:o,value:i}})},reorderWidget:function(t,a,o){r.dispatch({type:n.ReorderWidget,payload:{variationId:e,widgetsArea:t,start:a,end:o}})},removeWidget:function(t,a){r.dispatch({type:n.RemoveWidget,payload:{variationId:e,widgetsArea:t,key:a}})},updateWidgetMockConfig:f(r.dispatch)(e),deleteWidgetMockConfig:v(r.dispatch)(e)}}))},C=r("HARG"),D=r("aUsF"),M=r.n(D),I=r("biDh"),R=r("7oZo"),V=r("tsos"),E=r("BO2T"),U=r("OwoP");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t){var r=function(){switch(t.type){case m.Reset:return N(N({},e),{},{variations:e.initialVariations});case m.Save:return t.payload.state;case m.Push:return N(N({},e),{},{__status:V.a.Synced,initialScreenshotUrls:e.screenshotUrls,remoteVariations:e.variations});case m.CopyVariation:var r=t.payload,a=r.key,i=r.name,c=r.copied;return N(N({},e),{},{variations:e.variations.concat([C.a.copyValue(c,a,i)])});case n.GenerateCustomScreenShot:var s=t.payload,u=s.variationId,d=s.screenshot,p=e.variations.reduce((function(t,r){var n,a;return r.id===u?N(N({},t),{},Object(o.a)({},u,d)):null!==(n=e.screenshotUrls)&&void 0!==n&&n[r.id]?N(N({},t),{},Object(o.a)({},r.id,null===(a=e.screenshotUrls)||void 0===a?void 0:a[r.id])):t}),{});return N(N({},e),{},{screenshotUrls:p});case n.GenerateScreenShot:var l=t.payload.screenshots;return N(N({},e),{},{screenshotUrls:l});case n.AddWidget:var f=t.payload,v=f.variationId,g=f.widgetsArea,y=f.key,O=f.value;try{return O.type!==U.WidgetTypes.Range&&O.type!==U.WidgetTypes.Separator&&O.type!==U.WidgetTypes.IntegrationField?(R[O.type].schema.validateSync(O,{stripUnknown:!1}),I.a.updateVariation(e,v)((function(e){return C.a.addWidget(e,g,y,O)}))):e}catch(L){return console.error('[store/addWidget] Model is invalid for widget "'.concat(O.type,'".\nFull error: ').concat(L)),e}case n.ReplaceWidget:var b=t.payload,h=b.variationId,j=b.widgetsArea,w=b.previousKey,S=b.newKey,P=b.value;try{return P.type!==U.WidgetTypes.Range&&P.type!==U.WidgetTypes.Separator&&P.type!==U.WidgetTypes.IntegrationField?(R[P.type].schema.validateSync(P,{stripUnknown:!1}),I.a.updateVariation(e,h)((function(e){return C.a.replaceWidget(e,j,w,S,P)}))):e}catch(L){return console.error('[store/replaceWidget] Model is invalid for widget "'.concat(P.type,'".\nFull error: ').concat(L)),e}case n.ReorderWidget:var k=t.payload,W=k.variationId,D=k.widgetsArea,M=k.start,E=k.end;return I.a.updateVariation(e,W)((function(e){return C.a.reorderWidget(e,D,M,E)}));case n.RemoveWidget:var x=t.payload,A=x.variationId,T=x.widgetsArea,_=x.key;return I.a.updateVariation(e,A)((function(e){return C.a.deleteWidget(e,T,_)}));case n.UpdateWidgetMockConfig:case n.DeleteWidgetMockConfig:return N(N({},e),{},{mockConfig:t.payload});default:throw new Error("Invalid action.")}}();return N(N({},r),{},{isTouched:!M()(r.initialVariations,r.variations)||!M()(r.initialMockConfig,r.mockConfig),__status:function(){if(r.__status===V.a.NewSlice)return r.__status;var e=!M()(r.screenshotUrls,r.initialScreenshotUrls);return!Object(E.a)(r.remoteVariations,r.initialVariations)||e?V.a.Modified:r.__status}()})}var T=r("nKUr"),_=["model"];function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=s.a.createContext({});function q(e){var t=e.slice,r=e.remoteSlice,n=e.mockConfig,a=t.model,o=Object(i.a)(t,_),s=G(G({model:a},o),{},{variations:a.variations,mockConfig:n,initialMockConfig:n,remoteVariations:r?r.variations:[],initialScreenshotUrls:o.screenshotUrls,initialVariations:a.variations}),u=Object(c.useReducer)(A,s),d=u[0],p=u[1];return[d,new W(p)]}F.displayName="SliceContext";var K=function(e){var t=e.children,r=e.value,n=e.variation,o=Object(a.a)(r,2),i=o[0],c=o[1];return Object(T.jsx)(F.Provider,{value:{Model:i,store:c,variation:n},children:"function"===typeof t?t(r):t})},J=function(e){var t=e.children,r=Object(u.useRouter)(),n=Object(c.useContext)(d.a);if(!r.query||!r.query.lib||!r.query.sliceName)return t;var o=function(){var e=r.query.lib;return e instanceof Array?e[0]:e}(),i=null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.name)===o.replace(/--/g,"/")}));if(!i)return r.replace("/"),null;var s=i.components.find((function(e){return Object(a.a)(e,1)[0].model.name===r.query.sliceName}));if(!s)return r.replace("/"),null;var p=function(){var e=r.query.variation;return e instanceof Array?e[0]:e}(),l=function(){if(p){var e=I.a.variation(s[0],p);return e||I.a.variation(s[0])}return I.a.variation(s[0])}();return l?(p||r.replace("/".concat(i.name,"/").concat(s[0].model.name,"/").concat(l.id)),Object(T.jsx)(K,{value:s,variation:l,children:t})):(r.replace("/"),null)}}}]);