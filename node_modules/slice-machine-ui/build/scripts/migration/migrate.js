"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.migrate = void 0;
const compare_versions_1 = __importDefault(require("compare-versions"));
const versions_1 = __importDefault(require("./versions"));
const run_1 = require("./run");
async function migrate(params) {
    const latestMigrationVersion = params.manifest._latest;
    const migrationsToRun = versions_1.default.filter((m) => {
        return compare_versions_1.default.compare(m.version, latestMigrationVersion || "0.0.41", ">");
    });
    if (!migrationsToRun.length)
        return;
    return run_1.run(migrationsToRun, params);
}
exports.migrate = migrate;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlncmF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NjcmlwdHMvbWlncmF0aW9uL21pZ3JhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsd0VBQStDO0FBRy9DLDBEQUFvQztBQUNwQywrQkFBNEI7QUFjckIsS0FBSyxVQUFVLE9BQU8sQ0FBQyxNQUF1QjtJQUNuRCxNQUFNLHNCQUFzQixHQUF1QixNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQztJQUUzRSxNQUFNLGVBQWUsR0FBZ0Isa0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtRQUMzRCxPQUFPLDBCQUFlLENBQUMsT0FBTyxDQUM1QixDQUFDLENBQUMsT0FBTyxFQUNULHNCQUFzQixJQUFJLFFBQVEsRUFDbEMsR0FBRyxDQUNKLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTTtRQUFFLE9BQU87SUFDcEMsT0FBTyxTQUFHLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLENBQUM7QUFiRCwwQkFhQyJ9