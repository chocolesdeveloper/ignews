"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MockConfigForm = exports.SelectionCard = void 0;
const react_1 = require("react");
const theme_ui_1 = require("theme-ui");
const formik_1 = require("formik");
const react_color_1 = require("react-color");
const _1 = require(".");
const consts_1 = require("@lib/consts");
const RAND = "random";
const SelectionCard = ({ name, checked, onSelect, children }) => {
    return (<theme_ui_1.Label sx={{
            border: "1px solid",
            borderRadius: "3px",
            borderColor: "borders",
            display: "block",
            position: "relative",
            bg: "headSection",
            mb: 2,
        }}>
      <theme_ui_1.Flex sx={{ p: 2 }}>
        <theme_ui_1.Radio name={name} onChange={onSelect} checked={checked}/>
        {children}
      </theme_ui_1.Flex>
    </theme_ui_1.Label>);
};
exports.SelectionCard = SelectionCard;
const Form = () => {
    var _a;
    const { values, setFieldValue } = formik_1.useFormikContext();
    const contentValue = ((_a = values[consts_1.MockConfigKey]) === null || _a === void 0 ? void 0 : _a.content) || null;
    const [transitionPreserved, preserveTransition] = react_1.useState(false);
    const [lastValue, setLastValue] = react_1.useState(contentValue);
    const onChange = (color) => {
        setLastValue(color.hex);
        setFieldValue(consts_1.MockConfigKey, {
            content: color.hex,
        });
    };
    const reset = () => {
        setFieldValue(consts_1.MockConfigKey, {});
    };
    const startPreserveTransition = () => {
        preserveTransition(true);
        setTimeout(() => preserveTransition(false), 1000);
    };
    return (<theme_ui_1.Box>
      <theme_ui_1.Label variant="label.primary" sx={{ display: "block" }}>
        <theme_ui_1.Text as="span" mb={1} sx={{ display: "inline-block" }}>
          Color value
        </theme_ui_1.Text>
        <exports.SelectionCard value={contentValue} name={RAND} onSelect={reset} checked={contentValue === null}>
          Random Color
        </exports.SelectionCard>
        <exports.SelectionCard name="custom" value={contentValue} onSelect={() => onChange({ hex: lastValue || "#111" })} checked={contentValue !== null}>
          Custom Color
        </exports.SelectionCard>
        {contentValue || transitionPreserved ? (<react_color_1.BlockPicker color={contentValue || lastValue} onChangeComplete={onChange} onChange={startPreserveTransition}/>) : null}
      </theme_ui_1.Label>
    </theme_ui_1.Box>);
};
Form.initialValues = _1.initialValues;
exports.MockConfigForm = Form;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYi9tb2RlbHMvY29tbW9uL3dpZGdldHMvQ29sb3IvTW9jay9Gb3JtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlDQUFpQztBQUNqQyx1Q0FBeUQ7QUFDekQsbUNBQTBDO0FBQzFDLDZDQUEwQztBQUUxQyx3QkFBa0M7QUFFbEMsd0NBQTRDO0FBRTVDLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQztBQUVmLE1BQU0sYUFBYSxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO0lBQ3JFLE9BQU8sQ0FDTCxDQUFDLGdCQUFLLENBQ0osRUFBRSxDQUFDLENBQUM7WUFDRixNQUFNLEVBQUUsV0FBVztZQUNuQixZQUFZLEVBQUUsS0FBSztZQUNuQixXQUFXLEVBQUUsU0FBUztZQUN0QixPQUFPLEVBQUUsT0FBTztZQUNoQixRQUFRLEVBQUUsVUFBVTtZQUNwQixFQUFFLEVBQUUsYUFBYTtZQUNqQixFQUFFLEVBQUUsQ0FBQztTQUNOLENBQUMsQ0FFRjtNQUFBLENBQUMsZUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQ2pCO1FBQUEsQ0FBQyxnQkFBSyxDQUVKLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUVYLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUVuQixPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFFbkI7UUFBQSxDQUFDLFFBQVEsQ0FDWDtNQUFBLEVBQUUsZUFBSSxDQUNSO0lBQUEsRUFBRSxnQkFBSyxDQUFDLENBQ1QsQ0FBQztBQUNKLENBQUMsQ0FBQztBQTFCVyxRQUFBLGFBQWEsaUJBMEJ4QjtBQUVGLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRTs7SUFFaEIsTUFBTSxFQUFFLE1BQU0sRUFBRSxh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