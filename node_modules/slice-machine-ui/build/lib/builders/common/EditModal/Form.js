"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const react_1 = require("react");
const formik_1 = require("formik");
const theme_ui_1 = require("theme-ui");
const consts_1 = require("../../../consts");
const WidgetForm = ({ formId, initialValues, validationSchema, onSave, FormFields, children, }) => {
    return (<theme_ui_1.Box>
      <formik_1.Formik validateOnChange initialValues={initialValues} validationSchema={validationSchema} onSubmit={(values, _) => {
            const { id: apiId, [consts_1.MockConfigKey]: mockConfigObject, ...rest } = values;
            const withDefaultValues = Object.entries(rest).reduce((acc, [key, value]) => {
                var _a;
                if (typeof value !== Boolean && !value) {
                    const maybeDefaultValue = (_a = FormFields[key]) === null || _a === void 0 ? void 0 : _a.defaultValue;
                    if (maybeDefaultValue !== undefined) {
                        return {
                            ...acc,
                            [key]: maybeDefaultValue,
                        };
                    }
                }
                return {
                    ...acc,
                    [key]: value,
                };
            }, {});
            onSave({ newKey: apiId, value: withDefaultValues }, mockConfigObject);
        }}>
        {(props) => (<formik_1.Form id={formId}>
            {children({
                ...props,
                initialValues,
            })}
          </formik_1.Form>)}
      </formik_1.Formik>
    </theme_ui_1.Box>);
};
exports.default = react_1.memo(WidgetForm);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xpYi9idWlsZGVycy9jb21tb24vRWRpdE1vZGFsL0Zvcm0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBNkI7QUFDN0IsbUNBQXNDO0FBQ3RDLHVDQUErQjtBQUUvQiw0Q0FBZ0Q7QUFFaEQsTUFBTSxVQUFVLEdBQUcsQ0FBQyxFQUNsQixNQUFNLEVBQ04sYUFBYSxFQUNiLGdCQUFnQixFQUNoQixNQUFNLEVBQ04sVUFBVSxFQUNWLFFBQVEsR0FDVCxFQUFFLEVBQUU7SUFDSCxPQUFPLENBQ0wsQ0FBQyxjQUFHLENBQ0Y7TUFBQSxDQUFDLGVBQU0sQ0FDTCxnQkFBZ0IsQ0FFaEIsYUFBYSxDQUFDLENBQUMsYUFBYSxDQUFDLENBRTdCLGdCQUFnQixDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FFbkMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFFdEIsTUFBTSxFQUNKLEVBQUUsRUFBRSxLQUFLLEVBQ1QsQ0FBQyxzQkFBYSxDQUFDLEVBQUUsZ0JBQWdCLEVBQ2pDLEdBQUcsSUFBSSxFQUNSLEdBQUcsTUFBTSxDQUFDO1lBRVgsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FDbkQsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRTs7Z0JBQ3BCLElBQUksT0FBTyxLQUFLLEtBQUssT0FBTyxJQUFJLENBQUMsS0FBSyxFQUFFO29CQUV0QyxNQUFNLGlCQUFpQixHQUFHLE1BQUEsVUFBVSxDQUFDLEdBQUcsQ0FBQywwQ0FBRSxZQUFZLENBQUM7b0JBQ3hELElBQUksaUJBQWlCLEtBQUssU0FBUyxFQUFFO3dCQUNuQyxPQUFPOzRCQUNMLEdBQUcsR0FBRzs0QkFFTixDQUFDLEdBQUcsQ0FBQyxFQUFFLGlCQUFpQjt5QkFDekIsQ0FBQztxQkFDSDtpQkFDRjtnQkFDRCxPQUFPO29CQUNMLEdBQUcsR0FBRztvQkFFTixDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUs7aUJBQ2IsQ0FBQztZQUNKLENBQUMsRUFDRCxFQUFFLENBQ0gsQ0FBQztZQUVGLE1BQU0sQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FFRjtRQUFBLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQ1YsQ0FBQyxhQUFJLENBQ0gsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBRVg7WUFBQSxDQUVFLFFBQVEsQ0FBQztnQkFDUCxHQUFHLEtBQUs7Z0JBRVIsYUFBYTthQUNkLENBQUMsQ0FFTjtVQUFBLEVBQUUsYUFBSSxDQUFDLENBQ1IsQ0FDSDtNQUFBLEVBQUUsZUFBTSxDQUNWO0lBQUEsRUFBRSxjQUFHLENBQUMsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsa0JBQWUsWUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDIn0=