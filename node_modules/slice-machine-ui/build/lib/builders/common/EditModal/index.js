"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const react_modal_1 = __importDefault(require("react-modal"));
const SliceMachineModal_1 = __importDefault(require("@components/SliceMachineModal"));
const deepmerge_1 = __importDefault(require("deepmerge"));
const theme_ui_1 = require("theme-ui");
const yup = __importStar(require("yup"));
const Widgets = __importStar(require("@lib/models/common/widgets/withGroup"));
const forms_1 = require("@lib/forms");
const consts_1 = require("@lib/consts");
const WithTabs_1 = __importDefault(require("@components/Card/WithTabs"));
const ItemHeader_1 = __importDefault(require("@components/ItemHeader"));
const Flex_1 = require("@components/Flex");
const Form_1 = __importDefault(require("./Form"));
const Field_1 = __importDefault(require("./Field"));
const utils_1 = require("../../utils");
const utils_2 = require("@lib/utils");
if (process.env.NODE_ENV !== "test") {
    react_modal_1.default.setAppElement("#__next");
}
const FORM_ID = "edit-modal-form";
const EditModal = ({ close, data, fields, onSave, getFieldMockConfig }) => {
    if (!data.isOpen) {
        return null;
    }
    const { theme } = theme_ui_1.useThemeUI();
    const { field: [apiId, initialModelValues], } = data;
    const maybeWidget = utils_1.findWidgetByConfigOrType(Widgets, initialModelValues.config, initialModelValues.type);
    if (!maybeWidget) {
        return <div>{initialModelValues.type} not found</div>;
    }
    const { Meta: { icon: WidgetIcon }, FormFields, MockConfigForm, Form: CustomForm, schema: widgetSchema, } = maybeWidget;
    const initialConfig = {
        ...forms_1.createInitialValues(utils_2.removeProp(FormFields, "id")),
        ...initialModelValues.config,
    };
    const { res: validatedSchema, err } = (() => {
        try {
            return {
                res: widgetSchema.validateSync({
                    type: initialModelValues.type,
                    config: initialConfig,
                }, { stripUnknown: true }),
            };
        }
        catch (e) {
            return { err: e };
        }
    })();
    if (err) {
        console.error(`[EditModal] Failed to validate field of type ${initialModelValues.type}.\n Please update model.json accordingly.`);
        console.error(err);
    }
    const initialValues = {
        id: apiId,
        config: validatedSchema ? validatedSchema.config : initialConfig,
        [consts_1.MockConfigKey]: deepmerge_1.default((MockConfigForm === null || MockConfigForm === void 0 ? void 0 : MockConfigForm.initialValues) || {}, getFieldMockConfig({ apiId }) || {}),
    };
    const [idMatches, idMessage] = FormFields.id.validate.matches;
    const validationSchema = yup.object().shape({
        id: yup.string().matches(idMatches, idMessage).min(3).max(35).required(),
        config: widgetSchema.fields.config,
    });
    const formId = `${FORM_ID}-${Math.random().toString()}`;
    return (<SliceMachineModal_1.default isOpen shouldCloseOnOverlayClick onRequestClose={close} contentLabel="Widget Form Modal">
      <Form_1.default apiId={apiId} formId={formId} initialValues={initialValues} validationSchema={validationSchema} FormFields={FormFields} onSave={({ newKey, value }, mockValue) => {
            const maybeUpdatedMockValue = (MockConfigForm === null || MockConfigForm === void 0 ? void 0 : MockConfigForm.onSave) && mockValue && Object.keys(mockValue).length
                ?
                    MockConfigForm.onSave(mockValue, value)
                : mockValue;
            const definitiveMockValue = (() => {
                if (maybeUpdatedMockValue &&
                    Object.keys(maybeUpdatedMockValue).length &&
                    !!Object.entries(maybeUpdatedMockValue).find(([, v]) => v !== null)) {
                    return maybeUpdatedMockValue;
                }
                return null;
            })();
            const updatedValue = {
                ...initialModelValues,
                ...value,
            };
            onSave({
                apiId,
                newKey,
                value: updatedValue,
                mockValue: definitiveMockValue,
            });
            close();
        }}>
        {(props) => {
            const { values: { id, config: { label }, }, isValid, isSubmitting, initialValues, } = props;
            return (<WithTabs_1.default borderFooter footerSx={{ p: 0, mb: 5 }} tabs={["Field Model", "Mock config"]} Header={({ radius }) => (<theme_ui_1.Flex sx={{
                        p: 3,
                        bg: "headSection",
                        alignItems: "center",
                        justifyContent: "space-between",
                        borderTopLeftRadius: radius,
                        borderTopRightRadius: radius,
                    }}>
                  <ItemHeader_1.default theme={theme} text={label || id} WidgetIcon={WidgetIcon}/>
                  <theme_ui_1.Close onClick={close} type="button"/>
                </theme_ui_1.Flex>)} Footer={<theme_ui_1.Flex sx={{ alignItems: "space-between", bg: "headSection", p: 3 }}>
                  <theme_ui_1.Box sx={{ ml: "auto" }}/>
                  <theme_ui_1.Button mr={2} type="button" onClick={close} variant="secondary">
                    Cancel
                  </theme_ui_1.Button>
                  <theme_ui_1.Button form={formId} type="submit" disabled={!isValid && isSubmitting}>
                    Save
                  </theme_ui_1.Button>
                </theme_ui_1.Flex>}>
              {CustomForm ? (<CustomForm {...props} fields={fields}/>) : (<Flex_1.Flex>
                  {Object.entries(FormFields).map(([key, field]) => (<Flex_1.Col key={key}>
                      <Field_1.default fieldName={forms_1.createFieldNameFromKey(key)} formField={field} fields={fields} initialValues={initialValues}/>
                    </Flex_1.Col>))}
                </Flex_1.Flex>)}

              <theme_ui_1.Box>
                {MockConfigForm ? (<theme_ui_1.Box>
                    <MockConfigForm initialValues={initialValues}/>
                  </theme_ui_1.Box>) : (<p>Mock data for this field is not yet available.</p>)}
              </theme_ui_1.Box>
            </WithTabs_1.default>);
        }}
      </Form_1.default>
    </SliceMachineModal_1.default>);
};
exports.default = EditModal;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWIvYnVpbGRlcnMvY29tbW9uL0VkaXRNb2RhbC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw4REFBZ0M7QUFDaEMsc0ZBQThEO0FBQzlELDBEQUFrQztBQUVsQyx1Q0FBZ0U7QUFFaEUseUNBQTJCO0FBQzNCLDhFQUFnRTtBQUVoRSxzQ0FBeUU7QUFFekUsd0NBQTRDO0FBRTVDLHlFQUE2QztBQUM3Qyx3RUFBZ0Q7QUFDaEQsMkNBQXlEO0FBRXpELGtEQUFnQztBQUNoQyxvREFBc0M7QUFFdEMsdUNBQXVEO0FBQ3ZELHNDQUF3QztBQUV4QyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLE1BQU0sRUFBRTtJQUNuQyxxQkFBSyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztDQUNoQztBQUVELE1BQU0sT0FBTyxHQUFHLGlCQUFpQixDQUFDO0FBRWxDLE1BQU0sU0FBUyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsa0JBQWtCLEVBQUUsRUFBRSxFQUFFO0lBRXhFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ2hCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcscUJBQVUsRUFBRSxDQUFDO0lBRy9CLE1BQU0sRUFDSixLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsa0JBQWtCLENBQUMsR0FDbkMsR0FBRyxJQUFJLENBQUM7SUFFVCxNQUFNLFdBQVcsR0FBRyxnQ0FBd0IsQ0FDMUMsT0FBTyxFQUVQLGtCQUFrQixDQUFDLE1BQU0sRUFFekIsa0JBQWtCLENBQUMsSUFBSSxDQUN4QixDQUFDO0lBRUYsSUFBSSxDQUFDLFdBQVcsRUFBRTtRQUVoQixPQUFPLENBQUMsR0FB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