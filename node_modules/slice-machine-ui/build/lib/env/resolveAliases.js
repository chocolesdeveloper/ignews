"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveAliases = void 0;
const path_1 = __importDefault(require("path"));
const node_utils_1 = require("@slicemachine/core/build/node-utils");
const module_alias_1 = __importDefault(require("module-alias"));
const isAPackageHasModuleAliases = (jsonPackage) => {
    return jsonPackage.hasOwnProperty("_moduleAliases");
};
function resolveAliases(cwd) {
    const pkg = node_utils_1.retrieveJsonPackage(cwd);
    if (!pkg.content || !isAPackageHasModuleAliases(pkg.content)) {
        return;
    }
    const moduleAliases = Object.entries(pkg.content._moduleAliases);
    moduleAliases.forEach(([key, value]) => {
        module_alias_1.default.addAlias(key, (fromPath) => {
            return path_1.default.join(path_1.default.relative(path_1.default.dirname(fromPath), path_1.default.join(cwd, value)));
        });
    });
}
exports.resolveAliases = resolveAliases;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZUFsaWFzZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvZW52L3Jlc29sdmVBbGlhc2VzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdEQUF3QjtBQUN4QixvRUFHNkM7QUFDN0MsZ0VBQXVDO0FBTXZDLE1BQU0sMEJBQTBCLEdBQUcsQ0FDakMsV0FBbUQsRUFDVixFQUFFO0lBQzNDLE9BQU8sV0FBVyxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3RELENBQUMsQ0FBQztBQUVGLFNBQWdCLGNBQWMsQ0FBQyxHQUFXO0lBQ3hDLE1BQU0sR0FBRyxHQUFHLGdDQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxJQUFJLENBQUMsMEJBQTBCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQzVELE9BQU87S0FDUjtJQUVELE1BQU0sYUFBYSxHQUF1QixNQUFNLENBQUMsT0FBTyxDQUN0RCxHQUFHLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FDM0IsQ0FBQztJQUVGLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBR3JDLHNCQUFXLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQWdCLEVBQUUsRUFBRTtZQUM3QyxPQUFPLGNBQUksQ0FBQyxJQUFJLENBQ2QsY0FBSSxDQUFDLFFBQVEsQ0FBQyxjQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLGNBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQzdELENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQW5CRCx3Q0FtQkMifQ==