"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.scopePreviewToDefaultVariation = void 0;
const path_1 = __importDefault(require("path"));
const fs_1 = __importDefault(require("fs"));
const core_1 = require("@slicemachine/core");
function scopePreviewToDefaultVariation(cwd, libraryName, sliceName) {
    const slicePath = core_1.FileSystem.GeneratedPaths(cwd)
        .library(libraryName)
        .slice(sliceName)
        .value();
    const generatedSlicePreview = core_1.Utils.Files.readFirstOf([
        path_1.default.join(slicePath, "preview.png"),
        path_1.default.join(slicePath, "preview.jpg"),
    ])((v) => v);
    if (!generatedSlicePreview)
        return;
    const dirname = path_1.default.dirname(generatedSlicePreview.path);
    const fileName = path_1.default.basename(generatedSlicePreview.path);
    const generatedVariationPreviewPath = path_1.default.join(dirname, "default", fileName);
    core_1.Utils.Files.mkdir(path_1.default.dirname(generatedVariationPreviewPath), {
        recursive: true,
    });
    fs_1.default.renameSync(generatedSlicePreview.path, generatedVariationPreviewPath);
}
exports.scopePreviewToDefaultVariation = scopePreviewToDefaultVariation;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVQcmV2aWV3VG9EZWZhdWx0VmFyaWF0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY2hhbmdlbG9nL3ZlcnNpb25zLzAuMS4wL3Njb3BlUHJldmlld1RvRGVmYXVsdFZhcmlhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxnREFBd0I7QUFDeEIsNENBQW9CO0FBQ3BCLDZDQUF1RDtBQUd2RCxTQUFnQiw4QkFBOEIsQ0FDNUMsR0FBVyxFQUNYLFdBQW1CLEVBQ25CLFNBQWlCO0lBRWpCLE1BQU0sU0FBUyxHQUFHLGlCQUFVLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQztTQUM3QyxPQUFPLENBQUMsV0FBVyxDQUFDO1NBQ3BCLEtBQUssQ0FBQyxTQUFTLENBQUM7U0FDaEIsS0FBSyxFQUFFLENBQUM7SUFFWCxNQUFNLHFCQUFxQixHQUFHLFlBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDO1FBQ3BELGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQztRQUNuQyxjQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUM7S0FDcEMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNiLElBQUksQ0FBQyxxQkFBcUI7UUFBRSxPQUFPO0lBRW5DLE1BQU0sT0FBTyxHQUFHLGNBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDekQsTUFBTSxRQUFRLEdBQUcsY0FBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUUzRCxNQUFNLDZCQUE2QixHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUU5RSxZQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxjQUFJLENBQUMsT0FBTyxDQUFDLDZCQUE2QixDQUFDLEVBQUU7UUFDN0QsU0FBUyxFQUFFLElBQUk7S0FDaEIsQ0FBQyxDQUFDO0lBQ0gsWUFBRSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsNkJBQTZCLENBQUMsQ0FBQztBQUMzRSxDQUFDO0FBekJELHdFQXlCQyJ9