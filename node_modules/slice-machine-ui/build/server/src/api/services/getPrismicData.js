"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const neverthrow_1 = require("neverthrow");
const core_1 = require("@slicemachine/core");
const ErrorWithStatus_1 = __importDefault(require("@lib/models/common/ErrorWithStatus"));
const prismic_1 = require("@slicemachine/core/build/prismic");
function getPrismicData() {
    try {
        const prismicConfig = prismic_1.PrismicSharedConfigManager.get();
        const prismicData = {
            shortId: prismicConfig.shortId,
            intercomHash: prismicConfig.intercomHash,
        };
        if (prismicConfig.cookies === prismic_1.DEFAULT_CONFIG.cookies) {
            return neverthrow_1.ok(prismicData);
        }
        return neverthrow_1.ok({
            ...prismicData,
            auth: core_1.Utils.Cookie.parsePrismicAuthToken(prismicConfig.cookies),
        });
    }
    catch (e) {
        return neverthrow_1.err(new ErrorWithStatus_1.default("Could not parse file at ~/.prismic.", 500));
    }
}
exports.default = getPrismicData;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0UHJpc21pY0RhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zZXJ2ZXIvc3JjL2FwaS9zZXJ2aWNlcy9nZXRQcmlzbWljRGF0YS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDJDQUE2QztBQUc3Qyw2Q0FBMkM7QUFDM0MseUZBQWlFO0FBQ2pFLDhEQUcwQztBQUUxQyxTQUF3QixjQUFjO0lBQ3BDLElBQUk7UUFDRixNQUFNLGFBQWEsR0FBRyxvQ0FBMEIsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUV2RCxNQUFNLFdBQVcsR0FBZ0I7WUFDL0IsT0FBTyxFQUFFLGFBQWEsQ0FBQyxPQUFPO1lBQzlCLFlBQVksRUFBRSxhQUFhLENBQUMsWUFBWTtTQUN6QyxDQUFDO1FBRUYsSUFBSSxhQUFhLENBQUMsT0FBTyxLQUFLLHdCQUFjLENBQUMsT0FBTyxFQUFFO1lBQ3BELE9BQU8sZUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQ3hCO1FBRUQsT0FBTyxlQUFFLENBQUM7WUFDUixHQUFHLFdBQVc7WUFDZCxJQUFJLEVBQUUsWUFBSyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO1NBQ2hFLENBQUMsQ0FBQztLQUNKO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixPQUFPLGdCQUFHLENBQUMsSUFBSSx5QkFBZSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDN0U7QUFDSCxDQUFDO0FBcEJELGlDQW9CQyJ9