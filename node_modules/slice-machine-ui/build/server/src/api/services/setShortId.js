"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.setShortId = void 0;
const DefaultClient_1 = __importDefault(require("@lib/models/common/http/DefaultClient"));
const preferWroomBase_1 = __importDefault(require("../../../../lib/utils/preferWroomBase"));
const prismic_1 = require("@slicemachine/core/build/prismic");
async function setShortId(env, authToken) {
    const base = preferWroomBase_1.default(env.manifest.apiEndpoint);
    return DefaultClient_1.default.profile(base, authToken).then((profile) => {
        prismic_1.PrismicSharedConfigManager.setProperties({
            shortId: profile.shortId,
        });
        return profile;
    });
}
exports.setShortId = setShortId;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0U2hvcnRJZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NlcnZlci9zcmMvYXBpL3NlcnZpY2VzL3NldFNob3J0SWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsMEZBQWtFO0FBR2xFLDRGQUFvRTtBQUNwRSw4REFBOEU7QUFFdkUsS0FBSyxVQUFVLFVBQVUsQ0FDOUIsR0FBdUIsRUFDdkIsU0FBaUI7SUFFakIsTUFBTSxJQUFJLEdBQUcseUJBQWUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBRXZELE9BQU8sdUJBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1FBQzdELG9DQUEwQixDQUFDLGFBQWEsQ0FBQztZQUN2QyxPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU87U0FDekIsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBWkQsZ0NBWUMifQ==