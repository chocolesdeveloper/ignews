"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSlices = void 0;
const getEnv_1 = __importDefault(require("../services/getEnv"));
const Slice_1 = require("@slicemachine/core/build/models/Slice");
const getSlices = async (client) => {
    try {
        const res = await client.getSlice();
        if (res.status !== 200) {
            return { err: res, slices: [] };
        }
        const slices = await res.json();
        return { err: null, slices: slices.map((s) => Slice_1.Slices.toSM(s)) };
    }
    catch (e) {
        return { slices: [], err: e };
    }
};
exports.getSlices = getSlices;
async function handler() {
    const { env } = await getEnv_1.default();
    return await exports.getSlices(env.client);
}
exports.default = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zZXJ2ZXIvc3JjL2FwaS9zbGljZXMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQXdDO0FBSXhDLGlFQUF3RTtBQUdqRSxNQUFNLFNBQVMsR0FBRyxLQUFLLEVBQzVCLE1BQWtDLEVBSWpDLEVBQUU7SUFDSCxJQUFJO1FBQ0YsTUFBTSxHQUFHLEdBQUcsTUFBTSxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDcEMsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtZQUN0QixPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDakM7UUFFRCxNQUFNLE1BQU0sR0FBdUIsTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDcEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0tBQ2pFO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBYSxFQUFFLENBQUM7S0FDM0M7QUFDSCxDQUFDLENBQUM7QUFqQlcsUUFBQSxTQUFTLGFBaUJwQjtBQUNhLEtBQUssVUFBVSxPQUFPO0lBQ25DLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLGdCQUFNLEVBQUUsQ0FBQztJQUMvQixPQUFPLE1BQU0saUJBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUhELDBCQUdDIn0=