"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SliceZone = exports.SlicesSM = void 0;
const t = __importStar(require("io-ts"));
const Either_1 = require("fp-ts/lib/Either");
const slices_1 = require("@prismicio/types-internal/lib/customtypes/widgets/slices");
const Slices_1 = require("@prismicio/types-internal/lib/customtypes/widgets/slices/Slices");
const widgets_1 = require("@prismicio/types-internal/lib/customtypes/widgets");
exports.SlicesSM = t.type({
    key: t.string,
    value: t.array(t.type({
        key: t.string,
        value: t.union([slices_1.LegacySlice, slices_1.CompositeSlice, slices_1.SharedSliceRef]),
    })),
});
exports.SliceZone = {
    fromSM(slices) {
        return (0, Either_1.getOrElseW)(() => {
            throw new Error("Error while parsing an SM slicezone");
        })(Slices_1.DynamicSlices.decode({
            type: widgets_1.WidgetTypes.Slices,
            fieldset: "Slice Zone",
            config: {
                choices: slices.value.reduce((acc, { key, value }) => ({ ...acc, [key]: value }), {}),
            },
        }));
    },
    toSM(key, slices) {
        var _a;
        return (0, Either_1.getOrElseW)(() => {
            throw new Error("Error while parsing a prismic slicezone");
        })(exports.SlicesSM.decode({
            key,
            value: Object.entries(((_a = slices.config) === null || _a === void 0 ? void 0 : _a.choices) || []).map(([key, value]) => ({ key, value })),
        }));
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2xpY2VzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZGVscy9TbGljZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHlDQUEyQjtBQUMzQiw2Q0FBOEM7QUFDOUMscUZBSWtFO0FBQ2xFLDRGQUFnRztBQUNoRywrRUFBZ0Y7QUFFbkUsUUFBQSxRQUFRLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUM3QixHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU07SUFDYixLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FDWixDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ0wsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNO1FBQ2IsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxvQkFBVyxFQUFFLHVCQUFjLEVBQUUsdUJBQWMsQ0FBQyxDQUFDO0tBQzlELENBQUMsQ0FDSDtDQUNGLENBQUMsQ0FBQztBQUdVLFFBQUEsU0FBUyxHQUFHO0lBQ3ZCLE1BQU0sQ0FBQyxNQUFnQjtRQUNyQixPQUFPLElBQUEsbUJBQVUsRUFBQyxHQUFHLEVBQUU7WUFDckIsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO1FBQ3pELENBQUMsQ0FBQyxDQUNBLHNCQUFhLENBQUMsTUFBTSxDQUFDO1lBQ25CLElBQUksRUFBRSxxQkFBVyxDQUFDLE1BQU07WUFDeEIsUUFBUSxFQUFFLFlBQVk7WUFDdEIsTUFBTSxFQUFFO2dCQUNOLE9BQU8sRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FDMUIsQ0FBQyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQ25ELEVBQUUsQ0FDSDthQUNGO1NBQ0YsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRUQsSUFBSSxDQUFDLEdBQVcsRUFBRSxNQUFxQjs7UUFDckMsT0FBTyxJQUFBLG1CQUFVLEVBQUMsR0FBRyxFQUFFO1lBQ3JCLE1BQU0sSUFBSSxLQUFLLENBQUMseUNBQXlDLENBQUMsQ0FBQztRQUM3RCxDQUFDLENBQUMsQ0FDQSxnQkFBUSxDQUFDLE1BQU0sQ0FBQztZQUNkLEdBQUc7WUFDSCxLQUFLLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBLE1BQUEsTUFBTSxDQUFDLE1BQU0sMENBQUUsT0FBTyxLQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FDckQsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUNuQztTQUNGLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztDQUNGLENBQUMifQ==